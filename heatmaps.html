<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="UTF-8">
    <link href="heatmaps.css" rel= "stylesheet">
    <title>DATA SQUAD</title>
    <link href="style.css" rel="stylesheet">
    <div id="map"></div>
    <script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3sUdLWg8NfWltFW3edZz9Yk2Q1yE5fxM&callback=initMap">
    </script>
  </head>
  <body onload=initMap();>
    <div  id="map" style="position: fixed;"></div>
    <div id="floating-panel"> <button onclick="toggleHeatmap()">Toggle Heatmap</button> <button onclick="changeGradient()">Change gradient</button> <button onclick="changeRadius()">Change radius</button> <button onclick="changeOpacity()">Change opacity</button> </div>
    <div id = "time-slider">
        <form action = "#" method = "post">
        Time  <input id = "slider" type = "range" min = 0 max = 107 onchange= "evalSlider()"></input><output id = "sliderVal"></output>
      </input>
    </form>

    </div> 



  
  </body>


<script>

var map, heatmap;
var schools= [];
schools.push({lat:39.961024, long: -75.162782, percent: 13.64});
schools.push({lat: 39.990484, long: -75.184086, percent: 45.52});
schools.push({lat: 39.777748, long: -74.966211, percent: 50.33});
schools.push({lat: 40.011874, long: -75.129507, percent: 51.17});
schools.push({lat: 39.963589, long: -75.162017, percent: 52.58});
schools.push({lat: 39.923701, long: -75.168779, percent: 55.18});
schools.push({lat: 39.984303, long: -75.126329, percent: 55.67});
schools.push({lat: 39.9574, long: -75.238791, percent: 58.14});
schools.push({lat: 40.021596, long: -75.085286, percent: 59.01});
schools.push({lat: 39.958089, long: -75.219488, percent: 63.29});
schools.push({lat: 40.055832, long: -75.16074, percent: 65.49});
schools.push({lat: 40.04414, long: -75.042487, percent: 66.39});
schools.push({lat: 39.921986, long: -75.233707, percent: 66.13});
schools.push({lat: 39.984303, long: -75.126329, percent: 67.74});
schools.push({lat: 39.984561, long: -75.12834, percent: 67.74});
schools.push({lat: 39.923522, long: -75.150844, percent: 67.78});


function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 4,
    center: {lat: 39.834508, lng:  -97.972085},
    mapTypeId: 'satellite'
  });
  locations = getPoints();
  var markers = locations.map(function(location) {
    return new google.maps.Marker({
      position: location
    });
  });

  var markerCluster = new MarkerClusterer(map, markers,
      {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
}
  // heatmap = new google.maps.visualization.HeatmapLayer({
  //   data: getPoints(),
  //   map: map
  // });

function toggleHeatmap() {
  // heatmap.setMap(heatmap.getMap() ? null : map);
   marker.setMap(heatmap.getMap() ? null : map);
}
function evalSlider(){
  var startYear = 2010
  var sliderValue = document.getElementById('slider').value;
  var date = "  Month: "+ ((sliderValue%12)+1) + "  Year: " + (startYear + parseInt(sliderValue/12));
  document.getElementById('sliderVal').innerHTML = date;
}

function changeGradient() {
  var gradient = [
    'rgba(0, 255, 255, 0)',
    'rgba(0, 255, 255, 1)',
    'rgba(0, 191, 255, 1)',
    'rgba(0, 127, 255, 1)',
    'rgba(0, 63, 255, 1)',
    'rgba(0, 0, 255, 1)',
    'rgba(0, 0, 223, 1)',
    'rgba(0, 0, 191, 1)',
    'rgba(0, 0, 159, 1)',
    'rgba(0, 0, 127, 1)',
    'rgba(63, 0, 91, 1)',
    'rgba(127, 0, 63, 1)',
    'rgba(191, 0, 31, 1)',
    'rgba(255, 0, 0, 1)'
  ]
  heatmap.set('gradient', heatmap.get('gradient') ? null : gradient);
}

function changeRadius() {
  heatmap.set('radius', heatmap.get('radius') ? null : 40);
}

function changeOpacity() {
  heatmap.set('opacity', heatmap.get('opacity') ? null : 0.2);
}


function getPoints() {
var schoolpoints=[];
  for(var i=0; i<schools.length; i++) {
      schoolpoints[i] = new google.maps.LatLng(schools[i].lat,schools[i].long);
    }
    return schoolpoints;
};
function myFunction() {
  var x = document.getElementById("frm1");
}
</script>
</html>
